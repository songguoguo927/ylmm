{"version":3,"sources":["webpack:///./src/util/bus.js","webpack:///./src/containers/components/Signup.vue?cf64","webpack:///./src/containers/components/Signup.vue?b16c","webpack:///src/containers/components/Signup.vue","webpack:///./src/containers/components/Signup.vue"],"names":["Bus","Vue","render","_vm","this","_h","$createElement","_c","_self","staticStyle","display","background","padding","width","ref","staticClass","attrs","model","ruleForm","label","prop","type","autocomplete","value","callback","$$v","$set","expression","_v","on","click","$event","submitForm","id","_withStripped","data","name","nick_name","password","password_confirmation","tip","methods","resetForm","$refs","formName","resetFields","newUser","message","console","log","error","mounted","component","options","__file"],"mappings":"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","file":"9.build.js","sourcesContent":["// event-bus.js\r\nimport Vue from 'vue'\r\nexport const Bus = new Vue()\r\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      staticStyle: {\n        display: \"flex\",\n        \"justify-content\": \"center\",\n        \"margin-top\": \"30px\",\n        background: \"white\",\n        padding: \"40px\"\n      }\n    },\n    [\n      _c(\n        \"div\",\n        { staticStyle: { width: \"52%\" } },\n        [\n          _c(\n            \"el-form\",\n            {\n              ref: \"ruleForm\",\n              staticClass: \"demo-ruleForm\",\n              attrs: {\n                model: _vm.ruleForm,\n                \"status-icon\": \"\",\n                \"label-width\": \"100px\"\n              }\n            },\n            [\n              _c(\n                \"el-form-item\",\n                { attrs: { label: \"账号\", prop: \"name\" } },\n                [\n                  _c(\"el-input\", {\n                    attrs: { type: \"text\", autocomplete: \"off\" },\n                    model: {\n                      value: _vm.ruleForm[\"name\"],\n                      callback: function($$v) {\n                        _vm.$set(_vm.ruleForm, \"name\", $$v)\n                      },\n                      expression: \"ruleForm['name']\"\n                    }\n                  })\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"el-form-item\",\n                { attrs: { label: \"昵称\", prop: \"nick_name\" } },\n                [\n                  _c(\"el-input\", {\n                    attrs: { type: \"text\", autocomplete: \"off\" },\n                    model: {\n                      value: _vm.ruleForm[\"nick_name\"],\n                      callback: function($$v) {\n                        _vm.$set(_vm.ruleForm, \"nick_name\", $$v)\n                      },\n                      expression: \"ruleForm['nick_name']\"\n                    }\n                  })\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"el-form-item\",\n                { attrs: { label: \"密码\", prop: \"password\" } },\n                [\n                  _c(\"el-input\", {\n                    attrs: { type: \"password\", autocomplete: \"off\" },\n                    model: {\n                      value: _vm.ruleForm[\"password\"],\n                      callback: function($$v) {\n                        _vm.$set(_vm.ruleForm, \"password\", $$v)\n                      },\n                      expression: \"ruleForm['password']\"\n                    }\n                  })\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"el-form-item\",\n                { attrs: { label: \"确认密码\", prop: \"password_confirmation\" } },\n                [\n                  _c(\"el-input\", {\n                    attrs: { type: \"password\", autocomplete: \"off\" },\n                    model: {\n                      value: _vm.ruleForm[\"password_confirmation\"],\n                      callback: function($$v) {\n                        _vm.$set(_vm.ruleForm, \"password_confirmation\", $$v)\n                      },\n                      expression: \"ruleForm['password_confirmation']\"\n                    }\n                  })\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"el-form-item\",\n                [\n                  _c(\n                    \"el-button\",\n                    {\n                      attrs: { type: \"primary\" },\n                      on: {\n                        click: function($event) {\n                          return _vm.submitForm(\"ruleForm\")\n                        }\n                      }\n                    },\n                    [_vm._v(\"注册\")]\n                  )\n                ],\n                1\n              )\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\"div\", {\n            staticStyle: { \"margin-left\": \"80px\", \"margin-top\": \"0\" },\n            attrs: { id: \"sc\" }\n          })\n        ],\n        1\n      )\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/index.js??vue-loader-options!./Signup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/index.js??vue-loader-options!./Signup.vue?vue&type=script&lang=js&\"","<template>\r\n  <div style=\"display: flex;justify-content: center;margin-top:30px;background:white;padding:40px\">\r\n      <div style=\"width:52%;\">\r\n    <el-form\r\n      :model=\"ruleForm\"\r\n      status-icon\r\n      ref=\"ruleForm\"\r\n      label-width=\"100px\"\r\n      class=\"demo-ruleForm\"\r\n    >     \r\n    <!-- :rules=\"rules\" -->\r\n      <el-form-item label=\"账号\" prop=\"name\">\r\n        <el-input type=\"text\" v-model=\"ruleForm['name']\" autocomplete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"昵称\" prop=\"nick_name\">\r\n        <el-input type=\"text\" v-model=\"ruleForm['nick_name']\" autocomplete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"密码\" prop=\"password\">\r\n        <el-input type=\"password\" v-model=\"ruleForm['password']\" autocomplete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"确认密码\" prop=\"password_confirmation\">\r\n        <el-input type=\"password\" v-model=\"ruleForm['password_confirmation']\" autocomplete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">注册</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!-- <div>{{tip}}</div> -->\r\n    <div id=\"sc\" style=\"margin-left:80px;margin-top:0;\"></div>\r\n  </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { apiGeetest,createUser,apiLogin } from \"@/request/api\";\r\nimport Z from '@/util/localStorage.js'\r\nimport { Bus } from \"@/util/bus.js\";\r\n\r\nexport default {\r\n  data() {\r\n    var checkAge = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error(\"年龄不能为空\"));\r\n      }\r\n      setTimeout(() => {\r\n        if (!Number.isInteger(value)) {\r\n          callback(new Error(\"请输入数字值\"));\r\n        } else {\r\n          if (value < 18) {\r\n            callback(new Error(\"必须年满18岁\"));\r\n          } else {\r\n            callback();\r\n          }\r\n        }\r\n      }, 1000);\r\n    };\r\n    var validatePass = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        callback(new Error(\"请输入密码\"));\r\n      } else {\r\n        if (this.ruleForm.checkPass !== \"\") {\r\n          this.$refs.ruleForm.validateField(\"checkPass\");\r\n        }\r\n        callback();\r\n      }\r\n    };\r\n    var validatePass2 = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        callback(new Error(\"请再次输入密码\"));\r\n      } else if (value !== this.ruleForm.pass) {\r\n        callback(new Error(\"两次输入密码不一致!\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      ruleForm: {\r\n        name: \"\",\r\n        nick_name: \"\",\r\n        password:\"\",\r\n        password_confirmation: \"\"\r\n      },\r\n      tip:'未注册'\r\n      // rules: {\r\n      //   // pass: [{ validator: validatePass, trigger: \"blur\" }],\r\n      //   // checkPass: [{ validator: validatePass2, trigger: \"blur\" }],\r\n      //   // age: [{ validator: checkAge, trigger: \"blur\" }]\r\n      //   name: [],\r\n      //   nick_name: [],\r\n      //   password:[],\r\n      //   password_confirmation:[]\r\n      // }\r\n    };\r\n  },\r\n  methods: {\r\n    submitForm(formName) {\r\n      // this.$refs[formName].validate(valid => {\r\n      //   if (valid) {\r\n        this.newUser()\r\n        // } else {\r\n        //   console.log(\"error submit!!\");\r\n        //   return false;\r\n        // }\r\n      // });\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields();\r\n    },\r\n    newUser(){\r\n      createUser(this.ruleForm).then(res=>{\r\n        // console.log('user',res)  \r\n        // this.tip = '注册成功'+JSON.stringify(res)    \r\n        if(res.msg){\r\n          this.$message({\r\n          message:res.msg,\r\n          type:'error'\r\n          })\r\n        }else if(res.token){\r\n          Z.setStorage('token',res.token)\r\n        //注册成功返回res { id: 3, token: \"a8ZTTSl1tgpKttxgNBMag6lagTF2URAV\" }--将token存入本地\r\n        //以登录的状态跳转至主页\r\n        apiLogin({\r\n          name: this.ruleForm.name,\r\n          password:this.ruleForm.password\r\n        }).then(res=>{   \r\n            if(res.token){\r\n              Bus.$emit('getMyselfInfo')\r\n              this.$router.push('/')\r\n            }else{\r\n                this.$message({\r\n                message:res.msg+'hahaha',\r\n                type:'error'\r\n              })\r\n            }\r\n          }) \r\n        }\r\n      }).catch(error=>{\r\n        console.log(error,'注册失败')\r\n        this.tip = '注册失败'\r\n      })\r\n    }\r\n  },\r\n  mounted(){\r\n    // apiGeetest().then(res=>{//TODO 此请求500\r\n    //     console.log('geetest',res)\r\n    //   }).catch(error=>{\r\n    //     console.log(error)\r\n    //   })  \r\n    }\r\n  }\r\n</script>","import { render, staticRenderFns } from \"./Signup.vue?vue&type=template&id=555601ed&\"\nimport script from \"./Signup.vue?vue&type=script&lang=js&\"\nexport * from \"./Signup.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\xjm\\\\Downloads\\\\ylmm-web\\\\node_modules\\\\_vue-hot-reload-api@2.3.4@vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('555601ed')) {\n      api.createRecord('555601ed', component.options)\n    } else {\n      api.reload('555601ed', component.options)\n    }\n    module.hot.accept(\"./Signup.vue?vue&type=template&id=555601ed&\", function () {\n      api.rerender('555601ed', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/containers/components/Signup.vue\"\nexport default component.exports"],"sourceRoot":""}